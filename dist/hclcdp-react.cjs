"use strict";"use client";var y=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var V=(e,t)=>{for(var n in t)y(e,n,{get:t[n],enumerable:!0})},F=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let p of _(t))!T.call(e,p)&&p!==n&&y(e,p,{get:()=>t[p],enumerable:!(i=W(t,p))||i.enumerable});return e};var G=e=>F(y({},"__esModule",{value:!0}),e);var J={};V(J,{CdpClientWrapper:()=>q,CdpContextProvider:()=>C,CdpPageEvent:()=>B,CdpProvider:()=>w,Facebook:()=>x.Facebook,GoogleAnalytics:()=>x.GoogleAnalytics,useCdp:()=>h,useCdpContext:()=>v});module.exports=G(J);var x=require("hclcdp-web-sdk");var P=require("react");var r=require("react"),d=require("hclcdp-web-sdk");var a=require("react"),I=require("react/jsx-runtime"),O=(0,a.createContext)(null),C=({children:e})=>{let[t,n]=(0,a.useState)("page"),[i,p]=(0,a.useState)({});return(0,I.jsx)(O.Provider,{value:{eventIdentifier:t,setEventIdentifier:n,pageProperties:i,setPageProperties:p},children:e})},v=()=>{let e=(0,a.useContext)(O);if(!e)throw new Error("useCdpContext must be used within a CdpProvider");return e};var b=require("react/jsx-runtime"),j=(0,r.createContext)({isReady:!1,page:function(e){},track:function(e){},identify:function(e){},logout:function(){},setEventIdentifier:()=>{},setPageProperties:()=>{}}),w=({config:e,children:t})=>{let[n,i]=(0,r.useState)(!1),[p,D]=(0,r.useState)("page"),[H,A]=(0,r.useState)({}),k=(0,r.useRef)(!1),E=(0,r.useRef)([]),R=(0,r.useRef)([]),m=(0,r.useRef)([]);(0,r.useEffect)(()=>{if(!(typeof window>"u")&&!k.current){if(!e.writeKey){console.error("CdpProvider: Missing writeKey");return}d.HclCdp.init(e,(c,s)=>{c?console.error("CDPProvider initialization failed:",c):(k.current=!0,i(!0),E.current.forEach(({identifier:o,properties:u,otherIds:f})=>{d.HclCdp.page(o,u,f)}),E.current=[],R.current.forEach(({identifier:o,properties:u,otherIds:f})=>{d.HclCdp.track(o,u,f)}),R.current=[],m.current.forEach(({identifier:o,properties:u,otherIds:f})=>{d.HclCdp.identify(o,u,f)}),m.current=[])})}},[e.writeKey]);let N=({identifier:c=p,properties:s=H,otherIds:o={}})=>{n?d.HclCdp.page(c,s,o):E.current.push({identifier:c,properties:s,otherIds:o})},z=({identifier:c,properties:s={},otherIds:o={}})=>{n?d.HclCdp.track(c,s,o):R.current.push({identifier:c,properties:s,otherIds:o})},K=({identifier:c,properties:s={},otherIds:o={}})=>{n?d.HclCdp.identify(c,s,o):m.current.push({identifier:c,properties:s,otherIds:o})},Q=()=>{n&&d.HclCdp.logout()};return(0,b.jsx)(C,{children:(0,b.jsx)(j.Provider,{value:{isReady:n,page:N,track:z,identify:K,logout:Q,setEventIdentifier:D,setPageProperties:A},children:t})})},h=()=>(0,r.useContext)(j);var l=require("react/jsx-runtime"),M=()=>{let{page:e}=h(),{eventIdentifier:t,pageProperties:n}=v(),i=(0,P.useRef)(!1);return(0,P.useEffect)(()=>{t!=="page"&&(e({identifier:t,properties:n,otherIds:{}}),i.current=!0)},[e,t,n]),null},q=({config:e,children:t})=>(0,l.jsx)(w,{config:e,children:(0,l.jsxs)(C,{children:[(0,l.jsx)(M,{}),t]})});var S=require("react");var B=({pageName:e,pageProperties:t={}})=>{let{setEventIdentifier:n,setPageProperties:i}=v();return(0,S.useEffect)(()=>{n(e||""),i(t)},[e,t,n,i]),null};0&&(module.exports={CdpClientWrapper,CdpContextProvider,CdpPageEvent,CdpProvider,Facebook,GoogleAnalytics,useCdp,useCdpContext});
