"use strict";"use client";var m=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var V=(e,t)=>{for(var r in t)m(e,r,{get:t[r],enumerable:!0})},M=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of A(t))!T.call(e,s)&&s!==r&&m(e,s,{get:()=>t[s],enumerable:!(i=W(t,s))||i.enumerable});return e};var q=e=>M(m({},"__esModule",{value:!0}),e);var J={};V(J,{CdpClientWrapper:()=>F,CdpContextProvider:()=>f,CdpPageEvent:()=>G,CdpProvider:()=>w,useCdp:()=>b,useCdpContext:()=>v});module.exports=q(J);var P=require("react");var n=require("react"),c=require("hclcdp-web-sdk");var a=require("react"),I=require("react/jsx-runtime"),k=(0,a.createContext)(null),f=({children:e})=>{let[t,r]=(0,a.useState)("page"),[i,s]=(0,a.useState)({});return(0,I.jsx)(k.Provider,{value:{eventIdentifier:t,setEventIdentifier:r,pageProperties:i,setPageProperties:s},children:e})},v=()=>{let e=(0,a.useContext)(k);if(!e)throw new Error("useCdpContext must be used within a CdpProvider");return e};var R=require("react/jsx-runtime"),O=(0,n.createContext)({isReady:!1,page:()=>{},track:()=>{},identify:()=>{},logout:()=>{},setEventIdentifier:()=>{},setPageProperties:()=>{}}),w=({config:e,children:t})=>{let[r,i]=(0,n.useState)(!1),[s,H]=(0,n.useState)("page"),[S,N]=(0,n.useState)({}),h=(0,n.useRef)(!1),x=(0,n.useRef)([]),E=(0,n.useRef)([]),y=(0,n.useRef)([]);(0,n.useEffect)(()=>{if(!(typeof window>"u")&&!h.current){if(!e.writeKey){console.error("CdpProvider: Missing writeKey");return}c.HclCdp.init(e,(p,d)=>{p?console.error("CDPProvider initialization failed:",p):(h.current=!0,i(!0),x.current.forEach(({identifier:o,properties:u,otherIds:C})=>{c.HclCdp.page(o,u,C)}),x.current=[],E.current.forEach(({identifier:o,properties:u,otherIds:C})=>{c.HclCdp.track(o,u,C)}),E.current=[],y.current.forEach(({identifier:o,properties:u,otherIds:C})=>{c.HclCdp.identify(o,u,C)}),y.current=[])})}},[e.writeKey]);let z=({identifier:p=s,properties:d=S,otherIds:o={}})=>{r?c.HclCdp.page(p,d,o):x.current.push({identifier:p,properties:d,otherIds:o})},D=({identifier:p,properties:d={},otherIds:o={}})=>{r?c.HclCdp.track(p,d,o):E.current.push({identifier:p,properties:d,otherIds:o})},K=({identifier:p,properties:d={},otherIds:o={}})=>{r?c.HclCdp.identify(p,d,o):y.current.push({identifier:p,properties:d,otherIds:o})},Q=()=>{r&&c.HclCdp.logout()};return(0,R.jsx)(f,{children:(0,R.jsx)(O.Provider,{value:{isReady:r,page:z,track:D,identify:K,logout:Q,setEventIdentifier:H,setPageProperties:N},children:t})})},b=()=>(0,n.useContext)(O);var l=require("react/jsx-runtime"),B=()=>{let{page:e}=b(),{eventIdentifier:t,pageProperties:r}=v(),i=(0,P.useRef)(!1);return(0,P.useEffect)(()=>{!i.current&&t!=="page"&&(e({identifier:t,properties:r,otherIds:{}}),i.current=!0)},[e,t,r]),null},F=({config:e,children:t})=>(0,l.jsx)(w,{config:e,children:(0,l.jsxs)(f,{children:[(0,l.jsx)(B,{}),t]})});var j=require("react"),G=({pageName:e="page",pageProperties:t={}})=>{let{setEventIdentifier:r,setPageProperties:i}=v();return(0,j.useEffect)(()=>{r(e),i(t)},[r,e,i]),null};0&&(module.exports={CdpClientWrapper,CdpContextProvider,CdpPageEvent,CdpProvider,useCdp,useCdpContext});
