"use strict";"use client";var h=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var T=Object.prototype.hasOwnProperty;var V=(e,t)=>{for(var n in t)h(e,n,{get:t[n],enumerable:!0})},F=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of _(t))!T.call(e,i)&&i!==n&&h(e,i,{get:()=>t[i],enumerable:!(s=W(t,i))||s.enumerable});return e};var G=e=>F(h({},"__esModule",{value:!0}),e);var B={};V(B,{CdpClientWrapper:()=>M,CdpContextProvider:()=>C,CdpPageEvent:()=>q,CdpProvider:()=>O,Facebook:()=>y.Facebook,GoogleAnalytics:()=>y.GoogleAnalytics,useCdp:()=>I,useCdpContext:()=>v});module.exports=G(B);var y=require("hclcdp-web-sdk");var R=require("react");var r=require("react"),p=require("hclcdp-web-sdk");var a=require("react"),D=require("react/jsx-runtime"),j=(0,a.createContext)(null),C=({children:e})=>{let[t,n]=(0,a.useState)("page"),[s,i]=(0,a.useState)({});return(0,D.jsx)(j.Provider,{value:{eventIdentifier:t,setEventIdentifier:n,pageProperties:s,setPageProperties:i},children:e})},v=()=>{let e=(0,a.useContext)(j);if(!e)throw new Error("useCdpContext must be used within a CdpProvider");return e};var k=require("react/jsx-runtime"),H=(0,r.createContext)({isReady:!1,page:function(e){},track:function(e){},identify:function(e){},logout:function(){},setEventIdentifier:()=>{},setPageProperties:()=>{}}),O=({config:e,children:t})=>{let[n,s]=(0,r.useState)(!1),[i,P]=(0,r.useState)("page"),[x,A]=(0,r.useState)({}),S=(0,r.useRef)(!1),m=(0,r.useRef)([]),b=(0,r.useRef)([]),w=(0,r.useRef)([]);(0,r.useEffect)(()=>{if(!(typeof window>"u")&&!S.current){if(!e.writeKey){console.error("CdpProvider: Missing writeKey");return}p.HclCdp.init(e,(c,d)=>{c?console.error("CDPProvider initialization failed:",c):(S.current=!0,s(!0),m.current.forEach(({identifier:o,properties:u,otherIds:f})=>{p.HclCdp.page(o,u,f)}),m.current=[],b.current.forEach(({identifier:o,properties:u,otherIds:f})=>{p.HclCdp.track(o,u,f)}),b.current=[],w.current.forEach(({identifier:o,properties:u,otherIds:f})=>{p.HclCdp.identify(o,u,f)}),w.current=[])})}},[e.writeKey]);let N=({identifier:c=i,properties:d=x,otherIds:o={}})=>{n?p.HclCdp.page(c,d,o):m.current.push({identifier:c,properties:d,otherIds:o})},z=({identifier:c,properties:d={},otherIds:o={}})=>{n?p.HclCdp.track(c,d,o):b.current.push({identifier:c,properties:d,otherIds:o})},K=({identifier:c,properties:d={},otherIds:o={}})=>{n?p.HclCdp.identify(c,d,o):w.current.push({identifier:c,properties:d,otherIds:o})},Q=()=>{n&&p.HclCdp.logout()};return(0,k.jsx)(C,{children:(0,k.jsx)(H.Provider,{value:{isReady:n,page:N,track:z,identify:K,logout:Q,setEventIdentifier:P,setPageProperties:A},children:t})})},I=()=>(0,r.useContext)(H);var l=require("react/jsx-runtime"),J=()=>{let{page:e}=I(),{eventIdentifier:t,pageProperties:n}=v(),s=(0,R.useRef)(!1);return(0,R.useEffect)(()=>{t!=="page"&&(e({identifier:t,properties:n,otherIds:{}}),s.current=!0)},[e,t,n]),null},M=({config:e,children:t})=>(0,l.jsx)(O,{config:e,children:(0,l.jsxs)(C,{children:[(0,l.jsx)(J,{}),t]})});var g=require("react");var q=({pageName:e,pageProperties:t={}})=>{let{setEventIdentifier:n,setPageProperties:s}=v(),i=(0,g.useRef)(void 0),P=(0,g.useRef)(void 0);return(0,g.useEffect)(()=>{let x=JSON.stringify(t);i.current!==e&&(n(e||""),i.current=e),P.current!==x&&(s(t),P.current=x)},[e,t,n,s]),null};0&&(module.exports={CdpClientWrapper,CdpContextProvider,CdpPageEvent,CdpProvider,Facebook,GoogleAnalytics,useCdp,useCdpContext});
